### Stack

堆栈是一种特殊的线性表，其特性是后进先出，可以类比弹夹，先塞进的子弹在最后才出来。 js中可以用数组来模拟栈结构的先进后出，使用到的方法有push、pop。

如果我说堆栈可能是计算机程序中应用最多的数据结构，你会不会说我扯淡？平时我们写的代码里面，根本就没怎么用到堆栈这种数据结构呀。 但是，回忆一下单片机里面的汇编程序设计里面，是不是通篇都是堆栈这个词呢？ 在函数调用、跳转、循环的时候，我们都要做现场保护，所有现场数据都要压入堆栈里面，跳转之后再将栈顶的现场数据恢复回来。 但是，高级语言里面，这种流程控制都已经封装到底层里面，上层编程者无需再关心具体实现，所以即使堆栈遍布程序每个角落我们依然没有任何感知。

虽然普通的现场保护不用我们手工控制，但是在写递归函数的时候我们可以照葫芦画瓢，在进入递归前使用堆栈来保存各种过程状态，出递归的时候读取堆栈的状态。

递归的堆栈可能使用场景不多，在前端处理html模板的时候倒是可以用堆栈来匹配成对的括号。遇到开括号则将其压入，遇到匹配的闭括号则压出相应的开括号，否则继续压入。

```js
function pairTest(str) {
    var open = {
        '<': '>',
        '{': '}',
        '(': ')',
    };
    var close = {
        '>': '<',
        '}': '{',
        ')': '(',
    };
    var stack = [];
    var result = [];
    for (var i = 0, len = str.length; i < len; i++) {
        if (open[str[i]]) {
            stack.push({index: i, value: str[i]});
        }
        if (close[str[i]]) {
            if (close[str[i]] === stack[stack.length - 1].value) {
                var temp = stack.pop();
                result.push(str.slice(temp.index + 1, i));
            } else {
                throw new Error('匹配出错！');
            }
        }
    }
    return result;
}
```



